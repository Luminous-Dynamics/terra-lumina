<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terra Lumina ROI Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.5rem;
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h2 {
            margin-bottom: 1.5rem;
            color: #1a202c;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #4a5568;
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        input[type="range"] {
            width: 100%;
            margin-top: 0.5rem;
        }
        
        .range-value {
            text-align: right;
            color: #2d3748;
            font-weight: 600;
            margin-top: 0.25rem;
        }
        
        .results {
            background: #f7fafc;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-label {
            color: #4a5568;
        }
        
        .result-value {
            font-weight: 700;
            color: #1a202c;
            font-size: 1.125rem;
        }
        
        .highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .chart-container {
            margin-top: 2rem;
            height: 300px;
            position: relative;
        }
        
        .comparison-table {
            width: 100%;
            margin-top: 1.5rem;
        }
        
        .comparison-table th {
            background: #f7fafc;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
        }
        
        .comparison-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .positive {
            color: #48bb78;
            font-weight: 600;
        }
        
        .negative {
            color: #f56565;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
        }
        
        button:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Terra Lumina Investment Calculator</h1>
        
        <div class="calculator-grid">
            <!-- Input Section -->
            <div class="card">
                <h2>Investment Parameters</h2>
                
                <div class="input-group">
                    <label for="investment">Investment Amount (€)</label>
                    <input type="number" id="investment" value="10000000" min="1000000" step="1000000">
                </div>
                
                <div class="input-group">
                    <label for="stake">Equity Stake (%)</label>
                    <input type="range" id="stake" min="0.1" max="10" step="0.1" value="0.67">
                    <div class="range-value"><span id="stakeValue">0.67</span>%</div>
                </div>
                
                <div class="input-group">
                    <label for="holdPeriod">Hold Period (Years)</label>
                    <select id="holdPeriod">
                        <option value="3">3 Years (Construction)</option>
                        <option value="5" selected>5 Years (Operations)</option>
                        <option value="7">7 Years (Maturity)</option>
                        <option value="10">10 Years (Full Buildout)</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="exitMultiple">Exit Multiple</label>
                    <select id="exitMultiple">
                        <option value="2.5">2.5x (Conservative)</option>
                        <option value="3.5" selected>3.5x (Base Case)</option>
                        <option value="5">5x (Optimistic)</option>
                    </select>
                </div>
                
                <button onclick="calculateROI()">Calculate Returns</button>
            </div>
            
            <!-- Results Section -->
            <div class="card">
                <h2>Projected Returns</h2>
                
                <div class="results">
                    <div class="result-item">
                        <span class="result-label">Initial Investment</span>
                        <span class="result-value" id="initialInvestment">€10,000,000</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Exit Value</span>
                        <span class="result-value" id="exitValue">€35,000,000</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Total Return</span>
                        <span class="result-value positive" id="totalReturn">€25,000,000</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">IRR</span>
                        <span class="result-value positive" id="irr">28.5%</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">Annual Dividends (Year 5+)</span>
                        <span class="result-value" id="dividends">€1,200,000</span>
                    </div>
                </div>
                
                <div class="highlight">
                    Projected ROI: <span id="roiPercent">250%</span>
                </div>
            </div>
        </div>
        
        <!-- Energy Economics Card -->
        <div class="card">
            <h2>Energy Economics Comparison</h2>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Terra Lumina</th>
                        <th>Traditional City</th>
                        <th>Advantage</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Energy Cost (per kWh)</td>
                        <td class="positive">€0.02</td>
                        <td>€0.15</td>
                        <td class="positive">-87%</td>
                    </tr>
                    <tr>
                        <td>Carbon Emissions</td>
                        <td class="positive">0 kg CO₂</td>
                        <td>0.4 kg CO₂</td>
                        <td class="positive">-100%</td>
                    </tr>
                    <tr>
                        <td>Annual Energy Cost (per home)</td>
                        <td class="positive">€240</td>
                        <td>€1,800</td>
                        <td class="positive">-€1,560</td>
                    </tr>
                    <tr>
                        <td>Industrial Rate (per MWh)</td>
                        <td class="positive">€80</td>
                        <td>€150</td>
                        <td class="positive">-47%</td>
                    </tr>
                    <tr>
                        <td>Grid Reliability</td>
                        <td class="positive">99.99%</td>
                        <td>99.9%</td>
                        <td class="positive">10x better</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Cash Flow Projection -->
        <div class="card">
            <h2>Cash Flow Projection</h2>
            <canvas id="cashFlowChart"></canvas>
            
            <div class="results" style="margin-top: 2rem;">
                <h3>Key Milestones</h3>
                <div class="result-item">
                    <span class="result-label">Break-even</span>
                    <span class="result-value">Year 3</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Dividend Start</span>
                    <span class="result-value">Year 4</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Full Operations</span>
                    <span class="result-value">Year 5</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Exit Window Opens</span>
                    <span class="result-value">Year 7</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Update range value display
        document.getElementById('stake').addEventListener('input', function(e) {
            document.getElementById('stakeValue').textContent = e.target.value;
            calculateROI();
        });
        
        // Auto-calculate on any input change
        document.querySelectorAll('input, select').forEach(input => {
            input.addEventListener('change', calculateROI);
        });
        
        function formatCurrency(amount) {
            return '€' + new Intl.NumberFormat('en-EU').format(Math.round(amount));
        }
        
        function calculateROI() {
            const investment = parseFloat(document.getElementById('investment').value);
            const stake = parseFloat(document.getElementById('stake').value);
            const holdPeriod = parseInt(document.getElementById('holdPeriod').value);
            const exitMultiple = parseFloat(document.getElementById('exitMultiple').value);
            
            // Calculate exit value
            const exitValue = investment * exitMultiple;
            const totalReturn = exitValue - investment;
            const roi = ((totalReturn / investment) * 100).toFixed(0);
            
            // Calculate IRR (simplified)
            const irr = (Math.pow(exitMultiple, 1/holdPeriod) - 1) * 100;
            
            // Calculate annual dividends (12% yield after year 4)
            const annualDividends = investment * 0.12;
            
            // Update display
            document.getElementById('initialInvestment').textContent = formatCurrency(investment);
            document.getElementById('exitValue').textContent = formatCurrency(exitValue);
            document.getElementById('totalReturn').textContent = formatCurrency(totalReturn);
            document.getElementById('irr').textContent = irr.toFixed(1) + '%';
            document.getElementById('dividends').textContent = formatCurrency(annualDividends);
            document.getElementById('roiPercent').textContent = roi + '%';
            
            // Update chart
            drawCashFlowChart(investment, holdPeriod, exitMultiple);
        }
        
        function drawCashFlowChart(investment, holdPeriod, exitMultiple) {
            const canvas = document.getElementById('cashFlowChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.clientWidth;
            const height = 300;
            canvas.width = width;
            canvas.height = height;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Simple bar chart
            const years = holdPeriod;
            const barWidth = width / (years + 1);
            const maxValue = investment * exitMultiple;
            
            // Draw axes
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(40, height - 40);
            ctx.lineTo(width - 20, height - 40);
            ctx.stroke();
            
            // Draw bars
            for (let year = 0; year <= years; year++) {
                let value;
                if (year === 0) {
                    value = -investment;
                } else if (year < 3) {
                    value = -investment * 0.1; // Construction costs
                } else if (year === years) {
                    value = investment * exitMultiple;
                } else {
                    value = investment * 0.12; // Dividends
                }
                
                const barHeight = Math.abs(value) / maxValue * (height - 80);
                const x = 40 + year * barWidth + barWidth/4;
                const y = value > 0 ? height - 40 - barHeight : height - 40;
                
                ctx.fillStyle = value > 0 ? '#48bb78' : '#f56565';
                ctx.fillRect(x, y, barWidth/2, barHeight);
                
                // Year label
                ctx.fillStyle = '#4a5568';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('Y' + year, x + barWidth/4, height - 20);
            }
        }
        
        // Initial calculation
        calculateROI();
    </script>
</body>
</html>